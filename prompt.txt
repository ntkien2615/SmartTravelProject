
ğŸ“‹ Prompt HoÃ n Chá»‰nh: SmartTravelProject (UI/UX, PEP 8)
1. TÃªn dá»± Ã¡n & Má»¥c tiÃªu:

TÃªn: SmartTravelProject

Má»¥c tiÃªu: XÃ¢y dá»±ng má»™t web app demo báº±ng Streamlit (Multi-Page App), táº­p trung vÃ o UI/UX. á»¨ng dá»¥ng pháº£i cÃ³ giao diá»‡n mÆ°á»£t mÃ  vá»›i tÃ´ng mÃ u xanh dÆ°Æ¡ng (#1877F2) vÃ  phÃ¢n biá»‡t rÃµ 2 tráº¡ng thÃ¡i: CÃ´ng khai (khÃ¡ch) vÃ  ThÃ nh viÃªn (Ä‘Ã£ Ä‘Äƒng nháº­p).

2. Chuáº©n Code & Cháº¥t lÆ°á»£ng (Ráº¥t quan trá»ng):

TuÃ¢n thá»§ PEP 8: ToÃ n bá»™ code Python pháº£i tuÃ¢n thá»§ theo chuáº©n PEP 8.

TÃªn biáº¿n & TÃªn hÃ m: Sá»­ dá»¥ng kiá»ƒu snake_case (viáº¿t thÆ°á»ng, phÃ¢n cÃ¡ch báº±ng dáº¥u gáº¡ch dÆ°á»›i).

Tá»‘t: def handle_login, user_name, search_results

Xáº¥u: HandleLogin, userName, Searchresults

TÃªn Class (Náº¿u cÃ³): Sá»­ dá»¥ng kiá»ƒu CamelCase (viáº¿t hoa chá»¯ cÃ¡i Ä‘áº§u má»—i tá»«).

Comments: Code pháº£i cÃ³ bÃ¬nh luáº­n (comment) rÃµ rÃ ng táº¡i cÃ¡c khá»‘i logic phá»©c táº¡p, Ä‘áº·c biá»‡t lÃ  táº¡i cÃ¡c "Vá»‹ trÃ­ chá» API".

3. NgÄƒn xáº¿p cÃ´ng nghá»‡ (Tech Stack):

Framework: Streamlit

Database (Demo): SQLite3 (sá»­ dá»¥ng thÆ° viá»‡n sqlite3)

Hashing Máº­t kháº©u: bcrypt (CÃ i Ä‘áº·t: pip install bcrypt)

ThÆ° viá»‡n Dá»¯ liá»‡u: pandas (Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u cho báº£n Ä‘á»“ st.map)

4. Thiáº¿t láº­p Giao diá»‡n & Theme (UI Config):

Tá»‡p SmartTravel.py (Tá»‡p chÃ­nh): Pháº£i chá»©a st.set_page_config Ä‘á»ƒ Ã¡p dá»¥ng theme toÃ n cá»¥c.

Python

# SmartTravel.py (dÃ²ng Ä‘áº§u tiÃªn)
import streamlit as st

st.set_page_config(
    page_title="SmartTravelProject",
    page_icon="âœˆï¸",
    layout="wide",
    # Cáº¥u hÃ¬nh theme mÃ u xanh chá»§ Ä‘áº¡o
    theme={ 
        "primaryColor": "#1877F2", # MÃ u chÃ­nh cho nÃºt, widget
        "backgroundColor": "#FFFFFF", # Ná»n chÃ­nh
        "secondaryBackgroundColor": "#F0F2F5", # Ná»n phá»¥ (sidebar, container)
        "textColor": "#050505",
        "font": "sans serif"
    }
)
CSS TÃ¹y chá»‰nh: Táº£i file style.css Ä‘á»ƒ tÃ¹y chá»‰nh giao diá»‡n "Tháº»" (Card) cho st.container. (VÃ­ dá»¥: thÃªm box-shadow).

5. Cáº¥u trÃºc Database (SQLite3):

Cáº§n má»™t hÃ m init_db() Ä‘á»ƒ tá»± Ä‘á»™ng táº¡o cÃ¡c báº£ng nÃ y.

users: id (INTEGER PRIMARY KEY), username (TEXT UNIQUE), password_hash (TEXT)

search_history: id, user_id (FOREIGN KEY users.id), query (TEXT), timestamp (DATETIME)

collections: id, user_id (FOREIGN KEY users.id), name (TEXT)

saved_places: id, collection_id (FOREIGN KEY collections.id), place_name, address, image_url, latitude, longitude

6. Logic Cá»‘t lÃµi: Quáº£n lÃ½ Tráº¡ng thÃ¡i (Session State):

Sá»­ dá»¥ng st.session_state Ä‘á»ƒ lÆ°u:

st.session_state['logged_in'] (Boolean)

st.session_state['username'] (String)

st.session_state['user_id'] (Integer)

Luá»“ng báº£o vá»‡ (Auth Guard): Má»ŒI trang cá»§a "ThÃ nh viÃªn" (Dashboard, KhÃ¡m phÃ¡,...) pháº£i cÃ³ Ä‘oáº¡n code nÃ y á»Ÿ Ä‘áº§u:

Python

# Äáº·t á»Ÿ Ä‘áº§u má»—i file trong thÆ° má»¥c pages/
import streamlit as st

if not st.session_state.get('logged_in'):
    st.warning("Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ truy cáº­p trang nÃ y.")
    st.switch_page("pages/2_Dang_nhap.py")
    st.stop()
7. Cáº¥u trÃºc Tá»‡p & Chi tiáº¿t Giao diá»‡n (UI Flow):

7.1. Tá»‡p ChÃ­nh: SmartTravel.py (Trang chá»§ CÃ´ng khai)
Logic:

Táº£i st.set_page_config (Theme).

Táº£i style.css.

Gá»i init_db().

Kiá»ƒm tra: Náº¿u st.session_state.get('logged_in') == True, tá»± Ä‘á»™ng chuyá»ƒn hÆ°á»›ng Ä‘áº¿n Dashboard (st.switch_page("pages/1_Dashboard.py")).

UI (Khi chÆ°a Ä‘Äƒng nháº­p):

st.title("ChÃ o má»«ng Ä‘áº¿n vá»›i SmartTravelProject âœˆï¸").

DÃ¹ng st.columns(3) Ä‘á»ƒ giá»›i thiá»‡u 3 tÃ­nh nÄƒng. Má»—i cá»™t cÃ³ st.image (icon) vÃ  st.subheader.

NÃºt "ÄÄƒng nháº­p" vÃ  "ÄÄƒng kÃ½" ná»•i báº­t, trá» Ä‘áº¿n trang pages/2_Dang_nhap.py.

7.2. pages/1_Dashboard.py (Trang chá»§ ThÃ nh viÃªn)
Logic: Cháº¡y "Auth Guard" á»Ÿ Ä‘áº§u.

UI:

st.header(f"ChÃ o má»«ng trá»Ÿ láº¡i, {st.session_state.username}!")

Bá»‘ cá»¥c st.columns([2, 1]) (cá»™t trÃ¡i 60%, cá»™t pháº£i 40%).

Cá»™t trÃ¡i: "Lá»‹ch sá»­ tÃ¬m kiáº¿m" vÃ  "CÃ¡c Bá»™ sÆ°u táº­p" (Láº¥y tá»« SQLite).

Cá»™t pháº£i (AI Placeholder): "Gá»£i Ã½ cho báº¡n hÃ´m nay".

ğŸ“ Vá»‹ trÃ­ chá» API (Äá» xuáº¥t):

Python

def get_ai_recommendations(user_id):
    # ---- TODO: Káº¿t ná»‘i API thuáº­t toÃ¡n Ä‘á» xuáº¥t ----
    # response = requests.get(f"api/recommend?user={user_id}")
    # return response.json()['recommendations']

    # ---- Dá»¯ liá»‡u giáº£ láº­p (Mock data) cho UI ----
    return [
        {'name': 'QuÃ¡n Phá»Ÿ Demo', 'img': 'url1', 'desc': 'Gá»£i Ã½ vÃ¬ báº¡n thÃ­ch phá»Ÿ'},
        {'name': 'Cafe YÃªn TÄ©nh', 'img': 'url2', 'desc': 'Gá»£i Ã½ vÃ¬ báº¡n tÃ¬m "yÃªn tÄ©nh"'}
    ]

recommendations = get_ai_recommendations(st.session_state['user_id'])
for item in recommendations:
    with st.container(border=True):
        st.write(item['name'])
        st.caption(item['desc'])
7.3. pages/2_Dang_nhap.py
Logic:

Kiá»ƒm tra: Náº¿u st.session_state.get('logged_in') == True, tá»± Ä‘á»™ng chuyá»ƒn hÆ°á»›ng Ä‘áº¿n Dashboard.

UI:

DÃ¹ng st.tabs(["ÄÄƒng nháº­p", "ÄÄƒng kÃ½"]).

Tab "ÄÄƒng nháº­p": DÃ¹ng st.form("login_form").

HÃ m handle_login(username, password): Kiá»ƒm tra bcrypt vÃ  set st.session_state.

Tab "ÄÄƒng kÃ½": DÃ¹ng st.form("register_form").

HÃ m handle_register(username, password, confirm_password): Hash bcrypt vÃ  lÆ°u vÃ o SQLite.

7.4. pages/3_Kham_pha.py (TÃ­nh nÄƒng 1 & 3)
Logic: Cháº¡y "Auth Guard".

UI:

st.sidebar: DÃ nh cho táº¥t cáº£ cÃ¡c bá»™ lá»c (TÃ¬m kiáº¿m, GiÃ¡, Loáº¡i hÃ¬nh...).

Khu vá»±c chÃ­nh (Hiá»ƒn thá»‹ káº¿t quáº£):

ğŸ“ Vá»‹ trÃ­ chá» API (TÃ¬m kiáº¿m):

Python

def search_locations(query, filters):
    # ---- TODO: Káº¿t ná»‘i API tÃ¬m kiáº¿m ----
    # params = {'query': query, **filters}
    # response = requests.get("api/search", params=params)
    # return response.json()['results']

    # ---- Dá»¯ liá»‡u giáº£ láº­p (Mock data) cho UI ----
    return [
        {'id': 1, 'name': 'Äá»‹a Ä‘iá»ƒm A', 'img': 'urlA', 'addr': '123 ABC', 'lat': 10.0, 'lon': 106.0},
        {'id': 2, 'name': 'Äá»‹a Ä‘iá»ƒm B', 'img': 'urlB', 'addr': '456 XYZ', 'lat': 10.1, 'lon': 106.1}
    ]

results = search_locations(query_from_sidebar, filters_from_sidebar)
for item in results:
    with st.container(border=True): # Ãp dá»¥ng CSS 'Card'
        col1, col2 = st.columns([1, 2])
        with col1:
            st.image(item['img'])
        with col2:
            st.subheader(item['name'])
            st.caption(item['addr'])
            st.button("LÆ°u", key=f"save_{item['id']}")

            # ğŸ“ Vá»‹ trÃ­ chá» API (TÃ¬m Ä‘Æ°á»ng)
            if st.button("Chá»‰ Ä‘Æ°á»ng", key=f"nav_{item['id']}"):
                # route = get_directions_api(start, (item['lat'], item['lon']))
                # st.map(route['data'])
                st.map(pd.DataFrame({'lat': [item['lat']], 'lon': [item['lon']]}))
7.5. pages/4_Nhan_dien.py (TÃ­nh nÄƒng 2)
Logic: Cháº¡y "Auth Guard".

UI:

st.header("Nháº­n diá»‡n Ä‘á»‹a Ä‘iá»ƒm qua áº£nh")

uploaded_file = st.file_uploader("Táº£i áº£nh lÃªn Ä‘Ã¢y", type=['jpg', 'png'])

ğŸ“ Vá»‹ trÃ­ chá» API (Nháº­n diá»‡n áº£nh):

Python

def analyze_image_location(image_bytes):
    # ---- TODO: Káº¿t ná»‘i API nháº­n diá»‡n áº£nh ----
    # files = {'image': image_bytes}
    # response = requests.post("api/analyze", files=files)
    # return response.json()

    # ---- Dá»¯ liá»‡u giáº£ láº­p (Mock data) cho UI ----
    return {'status': 'success', 'place_name': 'NhÃ  Thá» Äá»©c BÃ  (Demo)', 'lat': 10.7797, 'lon': 106.6994}

if uploaded_file:
    with st.spinner("Äang phÃ¢n tÃ­ch áº£nh..."):
        image_data = uploaded_file.getvalue()
        result = analyze_image_location(image_data)

    if result['status'] == 'success':
        st.success(f"Káº¿t quáº£: {result['place_name']}")
        col1, col2 = st.columns(2)
        with col1:
            st.image(uploaded_file, caption="áº¢nh báº¡n táº£i lÃªn")
        with col2:
            st.map(pd.DataFrame({'lat': [result['lat']], 'lon': [result['lon']]}))
    else:
        st.error("KhÃ´ng thá»ƒ nháº­n diá»‡n Ä‘Æ°á»£c Ä‘á»‹a Ä‘iá»ƒm.")
7.6. pages/5_Ho_so.py (Profile)
Logic: Cháº¡y "Auth Guard".

UI:

st.header("Há»“ sÆ¡ cá»§a báº¡n")

DÃ¹ng st.tabs(["Bá»™ sÆ°u táº­p", "TÃ i khoáº£n"]).

Tab "Bá»™ sÆ°u táº­p": Hiá»ƒn thá»‹ vÃ  quáº£n lÃ½ collections vÃ  saved_places tá»« SQLite.

Tab "TÃ i khoáº£n":

Hiá»ƒn thá»‹ tÃªn ngÆ°á»i dÃ¹ng.

NÃºt ÄÄƒng xuáº¥t (Quan trá»ng):

Python

if st.button("ÄÄƒng xuáº¥t", type="primary", use_container_width=True):
    st.session_state.clear() # XÃ³a toÃ n bá»™ session
    st.switch_page("SmartTravel.py") # Vá» trang chá»§